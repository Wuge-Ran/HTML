<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>
<script>
window.onload = function () {
	var oUl = document.getElementById('list');
	var aLi = oUl.getElementsByTagName('li');
	var oPrice = document.querySelector('.price');
	var aStrong = document.getElementsByTagName('strong');
	var aEm = document.getElementsByTagName('em');
	var aSpan = document.getElementsByTagName('span');
	var oNum = document.querySelector('.num');
	var oMax = document.querySelector('.max');
	// fnCount ( aLi[0] );
	for ( var i=0; i<aLi.length; i++ ) {
		aLi[i].num = 0;
		aLi[i].price = 0;
		fnCount ( aLi[i] );
	}
	function count(){
		var numAll = 0;
		var priceAll = 0;
		var max = 0;
		for(var i=0; i<aLi.length; i++){
			numAll+=parseFloat(aStrong[i].innerHTML);
			priceAll+=parseFloat(aSpan[i].innerHTML);
			if(max<parseFloat(aEm[i].innerHTML)&&aStrong[i].innerHTML!=0){
				max=parseFloat(aEm[i].innerHTML);
			}
		}
		oNum.innerHTML = numAll;
		oPrice.innerHTML = priceAll;
		oMax.innerHTML = max;
	}
	function fnCount ( li ) {
		var aBtn = li.getElementsByTagName ('input');
		var oStrong = li.getElementsByTagName ('strong')[0];
		var oEm = li.getElementsByTagName ('em')[0];
		var oSpan = li.getElementsByTagName ('span')[0];
		var n = oStrong.innerHTML;			// '0'
		var price = parseFloat(oEm.innerHTML);			// 12.5
		
		aBtn[0].onclick = function () {
			if ( n > 0 ) {
				n--;
			}
			oStrong.innerHTML = n;
			oSpan.innerHTML = n*price + '元';
			li.num = n;
			li.price = n*price;
			count();
		};
		aBtn[1].onclick = function () {
			n++;
			oStrong.innerHTML = n;
			oSpan.innerHTML = n*price + '元';
			li.num = n;
			li.price = n*price;
			count();
		};
	}
};
</script>
</head>

<body>

<ul id="list">
	<li>
        <input type="button" value="-" />
        <strong>0</strong>
        <input type="button" value="+" />
        单价：<em>12.5元</em>
        小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>10.5元</em>
    小计：<span>0元</span>
  </li>
    <li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>8.5元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>8元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>14.5元</em>
    小计：<span>0元</span>
  </li>
</ul>

<div>
商品合计共：<span class="num">0</span>件，共花费了：<span class="price">0</span>元<br />
其中最贵的商品单价是：<span class="max">0</span>元
</div>
</body>
</html>